<html>
<head>
  <title>Image edit</title>
  <style type="text/css">
    canvas{border:#666}
  </style>
</head>
  <body>
    <div id="image-container">
      <canvas id="canvas" width="400" height="400"></canvas>       
    </div>
    <script>
      var canvas = document.querySelector('canvas');
      var ctx = canvas.getContext("2d");  
      var imageObj = new Image();
           
      imageObj.onload = function() {
        ctx.drawImage(imageObj, 0, 0, 400, 400);
      };
      
      imageObj.src = "bird.jpg";
      
      var data = ctx.getImageData(0,0,400,400);
      
      function paintGreen(imageData) {
        var numPixels = imageData.data.length /4 ;
        for (var i = 0; i <numPixels; i++){
          if(i % 10 === 0 ) {
            imageData.data[i*4 +1] = 255;
            imageData.data[i*4 +3] = 255;
          }
        }
        ctx.putImageData(imageData,0,0);
      }
      //paintGreen(data);
      
      function grayScale(imageData) {
        var imgPixels = ctx.getImageData(0, 0, 400, 400);
     
        for(var y = 0; y < imgPixels.height; y++){
            for(var x = 0; x < imgPixels.width; x++){
                var i = (y * 4) * imgPixels.width + x * 4;
                var avg = (imgPixels.data[i] + imgPixels.data[i + 1] + imgPixels.data[i + 2]) / 3;
                imgPixels.data[i] = avg; 
                imgPixels.data[i + 1] = avg; 
                imgPixels.data[i + 2] = avg;
            }
        }
        ctx.putImageData(imageData,0,0);
      }
      grayScale(data);
    </script>
  </body>
</html>